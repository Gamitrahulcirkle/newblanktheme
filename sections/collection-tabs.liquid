{%- if section.settings.collection_list != blank -%}
  <div class="container" data-section-type="collection-tabs">
    <div class="row">
      {%- if section.settings.heading != blank -%}
        <div class="col-lg-4 col-md-4">
          <div class="section-title">
            <h4>{{- section.settings.heading -}}</h4>
          </div>
        </div>
      {%- endif -%}
      <div class="col-lg-8 col-md-8">
        <ul class="filter__controls">
          <li class="active" data-filter="*">All</li>
          {%- assign product_count = 0 -%}
          {%- for collection in section.settings.collection_list -%}
            {%- if product_count >= section.settings.product_limit -%}{%- break -%}{%- endif -%}
            {%- assign product_count = product_count | plus: collection.products_count -%}
            <li data-filter=".{{- collection.title | handleize -}}">
              {{- collection.title -}}
            </li>
          {%- endfor -%}
        </ul>
      </div>
    </div>
    <div class="row property__gallery">
      {%- assign count = 0 -%}
      {%- for collection in section.settings.collection_list -%}
        {%- for product in collection.products -%}
          {%- if count >= section.settings.product_limit -%}{%- break -%}{%- endif -%}
          {% assign count = count | plus: 1 %}
          {%- render 'product-card', collection: collection, product: product, section_id: section.id -%}
        {%- endfor -%}
      {%- endfor -%}
    </div>
  </div>
{%- endif -%}
{% schema %}
{
  "name": "t:sections.collection-tabs.name",
  "tag": "section",
  "class": "product spad",
  "disabled_on": {
    "groups": ["header", "footer"]
  },
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
    },
    {
      "type": "collection_list",
      "id": "collection_list",
      "label": "Collections"
    },
    {
      "type": "range",
      "id": "product_limit",
      "min": 4,
      "max": 24,
      "step": 1,
      "label": "Product limit",
      "default": 8
    },
  ],
  "presets": [
    {
      "name": "t:sections.collection-tabs.name"
    }
  ]
}
{% endschema %}
